<!--  ant build file for creating self contained model zip -->
<project name="post_compile" default="war">

	<property name="simphony.web.app" location="/Users/nick/sfw/apache-tomcat-8.5.15/webapps/simphony" />
	<property name="simphony.web.app.classes" location="${simphony.web.app}/WEB-INF/classes" />

	<target name="copy_to_tomcat">
		<delete dir="${simphony.web.app.classes}" failonerror="false" />
		<mkdir dir="${simphony.web.app.classes}/repast" />
		<copy todir="${simphony.web.app.classes}/repast">
			<fileset dir="./bin/repast" />
		</copy>

		<copy todir="${simphony.web.app}">
			<fileset file="./web_src/index.html" />
		</copy>

		<copy todir="${simphony.web.app}/js">
			<fileset file="./web_src/js/sim.js" />
		</copy>
	</target>
	
	<target name="war" >
		<jar destfile="./web_src/WEB-INF/lib/repast.simphony.ws.jar">
			<fileset dir="./web_src/WEB-INF/classes" excludes="**/.DS_Store" />
		</jar>
		<jar destfile="./simphony.war">
			<fileset dir="web_src" excludes="**/.DS_Store"/>
		</jar>  
	</target>
</project>